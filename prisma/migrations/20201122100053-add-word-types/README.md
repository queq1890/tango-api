# Migration `20201122100053-add-word-types`

This migration has been generated by Yuji Matsumoto (queq1890) at 11/22/2020, 5:00:53 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "public"."PartsOfSpeech" AS ENUM ('NOUN', 'PRONOUN', 'ADJECTIVE', 'VERB', 'ADVERB', 'PREPOSITION', 'CONJUNCTION', 'INTERJUNCTION')

CREATE TABLE "WordBook" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "summary" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

CREATE TABLE "WordDeck" (
    "id" TEXT NOT NULL,
    "title" TEXT NOT NULL,
    "summary" TEXT NOT NULL,
    "wordBookId" TEXT,

    PRIMARY KEY ("id")
)

CREATE TABLE "Word" (
    "id" TEXT NOT NULL,
    "wordDeckId" TEXT,

    PRIMARY KEY ("id")
)

CREATE TABLE "Description" (
    "id" TEXT NOT NULL,
    "partsOfSpeech" "PartsOfSpeech" NOT NULL,
    "meanings" TEXT[],
    "wordId" TEXT,

    PRIMARY KEY ("id")
)

CREATE TABLE "Example" (
    "id" TEXT NOT NULL,
    "vn" TEXT NOT NULL,
    "ja" TEXT NOT NULL,
    "descriptionId" TEXT NOT NULL,

    PRIMARY KEY ("id")
)

ALTER TABLE "WordDeck" ADD FOREIGN KEY("wordBookId")REFERENCES "WordBook"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "Word" ADD FOREIGN KEY("wordDeckId")REFERENCES "WordDeck"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "Description" ADD FOREIGN KEY("wordId")REFERENCES "Word"("id") ON DELETE SET NULL ON UPDATE CASCADE

ALTER TABLE "Example" ADD FOREIGN KEY("descriptionId")REFERENCES "Description"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201121091628-init..20201122100053-add-word-types
--- datamodel.dml
+++ datamodel.dml
@@ -2,15 +2,26 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
+enum PartsOfSpeech {
+  NOUN
+  PRONOUN
+  ADJECTIVE
+  VERB
+  ADVERB
+  PREPOSITION
+  CONJUNCTION
+  INTERJUNCTION
+}
+
 model User {
   id        String    @id @default(cuid())
   email     String    @unique
   password  String
@@ -19,4 +30,44 @@
   createdAt DateTime  @default(now())
   updatedAt DateTime  @default(now())
   deletedAt DateTime?
 }
+
+model WordBook {
+  id        String     @id @default(cuid())
+  title     String
+  summary   String
+  wordDecks WordDeck[]
+}
+
+model WordDeck {
+  id         String    @id @default(cuid())
+  title      String
+  summary    String
+  words      Word[]
+  wordBook   WordBook? @relation(fields: [wordBookId], references: [id])
+  wordBookId String?
+}
+
+model Word {
+  id           String        @id @default(cuid())
+  descriptions Description[]
+  wordDeck     WordDeck?     @relation(fields: [wordDeckId], references: [id])
+  wordDeckId   String?
+}
+
+model Description {
+  id            String        @id @default(cuid())
+  partsOfSpeech PartsOfSpeech
+  meanings      String[]
+  examples      Example[]
+  word          Word?         @relation(fields: [wordId], references: [id])
+  wordId        String?
+}
+
+model Example {
+  id            String      @id @default(cuid())
+  vn            String
+  ja            String
+  description   Description @relation(fields: [descriptionId], references: [id])
+  descriptionId String
+}
```


