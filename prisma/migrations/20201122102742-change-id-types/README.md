# Migration `20201122102742-change-id-types`

This migration has been generated by Yuji Matsumoto (queq1890) at 11/22/2020, 5:27:42 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "Description" DROP CONSTRAINT "Description_wordId_fkey"

ALTER TABLE "Example" DROP CONSTRAINT "Example_descriptionId_fkey"

ALTER TABLE "Word" DROP CONSTRAINT "Word_wordDeckId_fkey"

ALTER TABLE "WordDeck" DROP CONSTRAINT "WordDeck_wordBookId_fkey"

ALTER TABLE "Description" DROP CONSTRAINT "Description_pkey",
DROP COLUMN "id",
ADD COLUMN "id" SERIAL,
DROP COLUMN "wordId",
ADD COLUMN     "wordId" INTEGER NOT NULL,
ADD PRIMARY KEY ("id")

ALTER TABLE "Example" DROP CONSTRAINT "Example_pkey",
DROP COLUMN "id",
ADD COLUMN "id" SERIAL,
DROP COLUMN "descriptionId",
ADD COLUMN     "descriptionId" INTEGER NOT NULL,
ADD PRIMARY KEY ("id")

ALTER TABLE "Word" DROP CONSTRAINT "Word_pkey",
DROP COLUMN "id",
ADD COLUMN "id" SERIAL,
DROP COLUMN "wordDeckId",
ADD COLUMN     "wordDeckId" INTEGER NOT NULL,
ADD PRIMARY KEY ("id")

ALTER TABLE "WordBook" DROP CONSTRAINT "WordBook_pkey",
DROP COLUMN "id",
ADD COLUMN "id" SERIAL,
ADD PRIMARY KEY ("id")

ALTER TABLE "WordDeck" DROP CONSTRAINT "WordDeck_pkey",
DROP COLUMN "id",
ADD COLUMN "id" SERIAL,
DROP COLUMN "wordBookId",
ADD COLUMN     "wordBookId" INTEGER NOT NULL,
ADD PRIMARY KEY ("id")

ALTER TABLE "Description" ADD FOREIGN KEY("wordId")REFERENCES "Word"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Example" ADD FOREIGN KEY("descriptionId")REFERENCES "Description"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "Word" ADD FOREIGN KEY("wordDeckId")REFERENCES "WordDeck"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "WordDeck" ADD FOREIGN KEY("wordBookId")REFERENCES "WordBook"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201122100236-add-dates-to-word-types..20201122102742-change-id-types
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -32,9 +32,9 @@
   deletedAt DateTime?
 }
 model WordBook {
-  id        String     @id @default(cuid())
+  id        Int        @id @default(autoincrement())
   title     String
   summary   String
   wordDecks WordDeck[]
   createdAt DateTime   @default(now())
@@ -42,49 +42,47 @@
   deletedAt DateTime?
 }
 model WordDeck {
-  id         String    @id @default(cuid())
+  id         Int       @id @default(autoincrement())
   title      String
   summary    String
   words      Word[]
-  wordBook   WordBook? @relation(fields: [wordBookId], references: [id])
-  wordBookId String?
+  wordBook   WordBook  @relation(fields: [wordBookId], references: [id])
+  wordBookId Int
   createdAt  DateTime  @default(now())
   updatedAt  DateTime  @default(now())
   deletedAt  DateTime?
 }
 model Word {
-  id           String        @id @default(cuid())
+  id           Int           @id @default(autoincrement())
   descriptions Description[]
-  wordDeck     WordDeck?     @relation(fields: [wordDeckId], references: [id])
-  wordDeckId   String?
+  wordDeck     WordDeck      @relation(fields: [wordDeckId], references: [id])
+  wordDeckId   Int
   createdAt    DateTime      @default(now())
   updatedAt    DateTime      @default(now())
   deletedAt    DateTime?
 }
 model Description {
-  id            String        @id @default(cuid())
+  id            Int           @id @default(autoincrement())
   partsOfSpeech PartsOfSpeech
   meanings      String[]
   examples      Example[]
-  word          Word?         @relation(fields: [wordId], references: [id])
-  wordId        String?
+  word          Word          @relation(fields: [wordId], references: [id])
+  wordId        Int
   createdAt     DateTime      @default(now())
   updatedAt     DateTime      @default(now())
   deletedAt     DateTime?
-
 }
 model Example {
-  id            String      @id @default(cuid())
+  id            Int         @id @default(autoincrement())
   vn            String
   ja            String
   description   Description @relation(fields: [descriptionId], references: [id])
-  descriptionId String
+  descriptionId Int
   createdAt     DateTime    @default(now())
   updatedAt     DateTime    @default(now())
   deletedAt     DateTime?
-
 }
```


